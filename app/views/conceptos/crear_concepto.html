<div class="panel panel-primary panel-body">

  <h2 class="page-header" align="center">{{"NUEVO_CONCEPTO" | translate}}</h2>

    <div class="panel panel-default shadow-box">
      <div class="panel-body">
        <form id="conceptoForm" name="conceptoForm" ng-submit="conceptoForm.$valid && crearConcepto.crear_concepto_nuevo()" focus-on-field novalidate>

          <div class="col-md-12 form-group" ng-init="isconcepto=true">
            <center><label>
                <input type="radio" ng-model="isconcepto" ng-value="true">
                {{"CONCEPTO" | translate}}
              </label>
              <label>
                <input type="radio" ng-model="isconcepto" ng-value="false">
                {{"CLASIFICACION" | translate}}
              </label></center>
          </div>

          <div class="form-group col-md-12" ng-class="{'text-danger ng-dirty': submitted && conceptoForm.selTipoConcepto.$invalid}">
            <label>{{"TIPO" | translate}}*:</label>
            <select name="selTipoConcepto" class="form-control" ng-model="crearConcepto.tipo_concepto" ng-options="tipo.Nombre for tipo in crearConcepto.tipos_concepto track by tipo.Id" required>
                <option value="" disabled>-- Seleccione Un tipo de Concepto --</option>
                </select>
            <div ng-messages="conceptoForm.selTipoConcepto.$error" style="color:maroon" role="alert" ng-show="submitted">
              <div ng-message="required">Este campo es obligatorio</div>
            </div>
          </div>

          <div class="col-md-12 form-group " ng-class="{'text-danger': submitted && conceptoForm.codigo.$invalid}">
            <label>{{"CODIGO" | translate}}*:</label>

            <fieldset class="form-group">

              <small>Selecciona una carpeta en donde estara el concepto</small>
              <arbol-conceptos filtro="filtro_padre" seleccion="crearConcepto.padre" conceptosel="nodo" recargar="crearConcepto.recargar" rdesc/>
            </fieldset>

            <fieldset class="col-md-12">
              <center>
                <span>Codigo*: </span>
                <span class="form-control form-control-inline" size="{{crearConcepto.nuevo_concepto.Codigo.length}}" readonly> {{crearConcepto.padre.Codigo}}-
                        </span>
                <input name="codigo" class="form-control form-control-inline" ng-model="crearConcepto.nuevo_concepto.Codigo" placeholder="Ingresar codigo" ng-maxlength="5" required>
                </input>
                <div ng-messages="conceptoForm.codigo.$error" style="color:maroon" role="alert" ng-show="submitted">
                  <div ng-message="required">Este campo es obligatorio</div>
                </div>
              </center>

              <!--span class="help-inline" ng-show="submitted && conceptoForm.codigo.$error.email">Invalid email</span-->
            </fieldset>
          </div>

          <div class="col-md-12 form-group " ng-class="{'text-danger': submitted && conceptoForm.nombre.$invalid}">
            <label>Nombre:</label>
            <input class="form-control" name="nombre" ng-model="crearConcepto.nuevo_concepto.Nombre" placeholder="Ingrese el nombre del concepto" required>
            </input>
            <div ng-messages="conceptoForm.nombre.$error" style="color:maroon" role="alert" ng-show="submitted">
              <div ng-message="required">Este campo es obligatorio</div>
            </div>
          </div>

          <div class="col-md-12 form-group ">

            <label>Descripcion:</label>

            <textarea class="form-control form" ng-model="crearConcepto.nuevo_concepto.Descripcion" placeholder="Ingrese una descripción para el concepto" rows="6">
                  </textarea>

          </div>

          <div ng-show="isconcepto">

            <div class="col-md-12 form-group ">

              <label>Afectacion:</label>


              <table class="table table-bordered table-responsive table-hover">

                <tr class="text-success">
                  <td>Tipo Afectacion</td>
                  <td>Ingreso</td>
                  <td>Egreso</td>
                </tr>
                <tr ng-repeat="tipo_afect in crearConcepto.tipos_afectacion">
                  <td>{{tipo_afect.Nombre}}</td>
                  <td><input ng-model="tipo_afect.Ingreso" type="checkbox"></td>
                  <td><input ng-model="tipo_afect.Egreso" type="checkbox"></td>
                </tr>

              </table>

            </div>


            <div class="col-md-12 form-group ">

              <label>Rubro:</label>
              <div class="shadow-box" ui-grid="crearConcepto.gridOptions" ui-grid-auto-resize ui-grid-selection ui-grid-pagination></div>

            </div>


            <div class="col-md-12 form-group ">

              <label>Cuentas Contables:</label>

              <fieldset class="form-group">
                <small class="text-muted">Seleccione las cuentas asociadas para el concepto</small>
                <plan-cuentas filtro="filtro_padre" seleccion="crearConcepto.cuenta_contable" recargar="crearConcepto.recargar_arbol" planid="crearConcepto.plan_maestro.Id" rdesc/>
              </fieldset>

              <small class="text-muted">Cuentas agregadas:</small>
              <div class="panel panel-success panel-body">

                <ul class="list-group alert-success">
                  <li class="list-group-item" ng-repeat="cu in crearConcepto.cuentas">
                    <span class="badge badge-error" ng-click="crearConcepto.quitar_cuentas($index)">x</span>
                    <label>[{{cu.Codigo}}] {{cu.Nombre}}</label>
                  </li>
                  <!--<li ng-show="crearConcepto.cuenta_contable!=undefined" class="list-group-item alert-warning">
                      <span class="badge badge-info" ng-click="crearConcepto.agregar_cuentas()">Agregar</span>
                      <label>[{{crearConcepto.cuenta_contable.Codigo}}] {{crearConcepto.cuenta_contable.Nombre}}</label>
                    </li>-->
                </ul>
              </div>

            </div>


            <div class="col-md-12 form-group ">
              <div class="col-md-2">
                <label>Fecha Expiración:</label>
              </div>
              <div class="col-md-10">

                <div class="input-group date" data-provide="datepicker">

                  <md-datepicker md-bcurrent-view="year" md-placeholder="Fecha" ng-model="crearConcepto.nuevo_concepto.FechaExpiracion"></md-datepicker>
                </div>

              </div>
            </div>


          </div>

          <div class="form-group" align="center">

            <div class="col-md-3 col-md-offset-3">
              <input type="submit" class="btn btn-outline btn-primary btn-lg btn-block" value="Confirmar" ng-click="submitted=true">
            </div>
            <div class="col-md-3 ">
              <button ng-click="crearConcepto.resetear(conceptoForm)" class="btn btn-outline btn-danger btn-lg btn-block">Cancelar</button>
            </div>
          </div>

        </form>


      </div>
    </div>


</div>
